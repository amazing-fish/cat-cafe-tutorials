# OpenCats Anchor 文档（技术路径锚点）

> 目的：冻结关键技术路径与协作约束，保证后续迭代可追溯、可对齐、可演进。

## A1. 产品边界锚点
- 项目名：**OpenCats**。
- 目标：在 Cat Café 教程资产基础上，构建可运行的多智能体协作工程。
- 输入约束：已有 `maomaov2` 前端原型（当前仅 API 形态），后端需补齐可运行会话层与认证桥接层。

## A2. 系统能力锚点
OpenCats 必须具备以下核心能力：
1. 多 Agent 编排：支持 Claude / GPT / Gemini 协作。
2. 会话上下文共享：多轮消息、任务状态、决策日志统一持久化。
3. 官方订阅直连：通过 CLI 的 `auth` 能力接入官方订阅账号，而非第三方中转。
4. 决策可追溯：每一次任务流转都记录 Why-First 元信息（What / Why / Tradeoff / Next Action）。

## A3. 分层架构锚点
- **UI 层**：`maomaov2` 作为协作工作台入口。
- **Orchestrator 层**：任务拆解、路由、超时与重试策略。
- **Connector 层**：各模型 CLI 适配器（claude / codex / gemini）。
- **Memory 层**：会话记录、决策日志、执行指标。
- **Governance 层**：权限、审计、版本策略、回滚机制。

## A4. 认证策略锚点
- 采用“**本机 CLI 登录态 + 服务侧受控调用**”模式。
- 不存储明文密钥，优先读取 CLI 官方授权状态。
- 对每类模型建立独立健康检查与登录态检测。

## A5. 版本治理锚点
采用 `v主.次.修`（SemVer）并绑定变更类型：
- `feature`：新增对外能力 → **次版本 +1**。
- `bugfix`：兼容性修复/缺陷修复 → **修订版本 +1**。
- `refactor`：不改变对外行为的结构优化 → **修订版本 +1**（若影响兼容性则主版本 +1）。

## A6. 交付门禁锚点
每次迭代至少交付：
1. 版本条目（CHANGELOG）。
2. 决策记录（ADR 或演进报告更新）。
3. 可验证清单（最小自测命令 + 结果）。

## A7. 与参考文章的映射锚点
- Anthropic《effective harnesses for long-running agents》对应：
  - 长任务 harness、可中断恢复、运行时 guardrails、评估闭环。
- Anthropic / Claude《building multi-agent systems》对应：
  - 明确分工、状态共享、协调器驱动而非盲目并发。

## A8. 非目标锚点（当前阶段）
- 不在当前阶段追求“全自动无人值守”生产自治。
- 不在当前阶段绑定单一云厂商托管能力。
- 不在当前阶段引入重型工作流引擎（先验证轻量编排）。
